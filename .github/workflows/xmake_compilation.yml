name: "Compilation Test and Publish"
on: [pull_request, push]
jobs:
  compilation:
    strategy:
      matrix: 
        os: [windows-latest, ubuntu-latest]
        
    runs-on: ${{ matrix.os }}
    name: "Compilation Test in Linux/Windows"
    steps:
      - name: "Get source code"
        uses: actions/checkout@v4
    
      - name: "Configure"
        run: "xmake f -m release -o build-action -y"
      
      - name: "Build"
        run: "xmake"

      - name: "Publish build object"
        uses: actions/upload-artifact@v4
        with:
          name: "BornToBeLowLevel"
          path: "${{ github.workspace }}/build-action/*"
          if-no-files-found: warn
